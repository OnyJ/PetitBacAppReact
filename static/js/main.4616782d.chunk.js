(this.webpackJsonppetit_bac_app_react=this.webpackJsonppetit_bac_app_react||[]).push([[0],{27:function(e,t,a){},40:function(e,t,a){e.exports=a(56)},54:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAABiklEQVRoge3awY3CMBAFUB+IfU0JlEAJlLAlpAO2hHRCC3RgxxRACdABJcwelgWtdhPseOxxov+luVrzZBG+CEohCIIg46HBHMiZKzlzpcEcpPfJGvLmkwZDv8Y3nfReWUK+6f5g14omrz9GsT9z3uyl92QJ2WZHTt/fgp2+k2120vsmJRi7BjRZ1T6exGHYF/pCVrXS+0flG6sv0dilopOwT7Sx0o6gkNPHZOzrpo/SnsmwYmtH/9uiuKa2YjLZotaGDmpRXCPdxqKLRfrnWa6YFMdKome3KD50uWKS3KKWhq4C+0RnbmNZikX6TecpJlVic6Gztiiu4SomRVpULeiiLYpr5rYxsWKROnOKyWKxc9HkjBVfOhkd8R0tvizTxICd9LIM48LBVm0XjnZk1TYYPH37uq8A9Bjds6AABlgaCjDAAJcF6z5sVgIOPxtggAHOHYABBhjg8bMBrgB83uwjlzoFnx37s1KpF+Pkm46cuYVgY97hklUtDfr09lxnbtX8yQVBECRnvgATHvuxyzzxegAAAABJRU5ErkJggg=="},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),o=a(8),u=a(16),s=a(37),i=a(6),m=a(11),p=a.n(m),b={token:null,currentUser:null,status:null,isLoading:!0,isRegistered:!1,isLogged:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{type:"LOGIN_SUCCESS",token:t.user.token,currentUser:t.user.user,isLoading:!1,isRegistered:!0,isLogged:!0});case"LOGIN_FAIL":return Object(i.a)(Object(i.a)({},e),{},{type:"LOGIN_FAIL",status:t.status,isLoading:!1});case"LOGIN_LOADING":return Object(i.a)(Object(i.a)({},e),{},{type:"LOGIN_LOADING",status:t.status});case"REGISTER_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{type:"REGISTER_SUCCESS",user:t.user,status:t.status,isLoading:!1,isRegistered:!0});case"LOGOUT_SUCCESS":return p.a.remove("token"),p.a.remove("user"),Object(i.a)(Object(i.a)({},e),{},{token:null,currentUser:null,isLogged:!1,isRegistered:!1});default:return e}},g={score:0},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCORE":return Object(i.a)(Object(i.a)({},e),{},{score:t.score});case"RESET":return Object(i.a)(Object(i.a)({},e),{},{score:0});default:return e}},f=Object(u.c)({auth:d,score:E}),h=Object(u.d)(f,Object(u.a)(s.a));h.subscribe((function(){return console.log(h.getState())}));var O=h,j=(a(27),a(34),a(3)),v=a(7),S=a(20),C=a(25),y=(a(49),a(10)),N=(Object(y.a)(),a(9)),w=function(e){var t=e.score;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," le score final est de: ",t," "))},k=function(e){var t=e.data,a=Object(o.c)((function(e){return e.score.score})),c=Object(n.useState)(t),l=Object(j.a)(c,2),u=l[0],s=(l[1],Object(n.useState)(!1)),i=Object(j.a)(s,2),m=i[0],p=i[1];return r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement("div",null,r.a.createElement("p",null," le score est de : ",u),r.a.createElement(N.b,{to:"/create_game"},r.a.createElement("button",null,"Rejouer")),r.a.createElement("button",{onClick:function(){return p(!0)}},"Voir les scores finaux")),m&&r.a.createElement(w,{score:a}))},A=function(e){var t=e.dataResults,a=Object(n.useState)([]),c=Object(j.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)(0),m=Object(j.a)(s,2),p=m[0],b=m[1],d=Object(n.useState)({}),g=Object(j.a)(d,2),E=g[0],f=g[1],h=Object(n.useState)(!1),O=Object(j.a)(h,2),v=O[0],y=O[1],N=Object(o.b)(),w=Object(o.c)((function(e){return e.score}));console.log(w),console.log(E),Object(n.useEffect)((function(){u.apply(void 0,Object(C.a)(l).concat([t]))}),[]);var A=function(e){N({type:"ADD_SCORE",score:e})};return console.log(p),console.log(E),r.a.createElement(r.a.Fragment,null,Object.keys(l).length&&!v&&r.a.createElement("div",null,r.a.createElement("h1",null,"GameMarking"),r.a.createElement("ul",{style:{listStyle:"none"}},Object.keys(l).map((function(e){return r.a.createElement("li",null,l[e],r.a.createElement("button",{onClick:function(){return f(Object(i.a)(Object(i.a)({},E),{},Object(S.a)({},l[e],!0)))}},"V"),r.a.createElement("button",{onClick:function(){return f(Object(i.a)(Object(i.a)({},E),{},Object(S.a)({},l[e],!1)))}},"X"))}))),r.a.createElement("button",{onClick:function(){return function(e){y(!0);for(var t=0,a=0,n=Object.entries(e);a<n.length;a++){var r=Object(j.a)(n[a],2),c=r[0],l=r[1];console.log("".concat(c,": ").concat(l)),!0===l&&(t+=1,console.log("+1"))}b(t),A(t+w.score)}(E)}},"Valider r\xe9ponses")),v&&r.a.createElement(k,{data:p}))},x=a(59),L=function(e){var t=e.gameId,a=Object(n.useState)([]),c=Object(j.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)({}),m=Object(j.a)(s,2),p=m[0],b=m[1],d=Object(n.useState)(t),g=Object(j.a)(d,2),E=g[0],f=(g[1],Object(o.c)((function(e){return e.auth}))),h=Object(n.useState)(!1),O=Object(j.a)(h,2),S=O[0],C=O[1];Object(v.g)();console.log(E),Object(n.useEffect)((function(){!function(){u([]);fetch("".concat("https://api-petitbac.herokuapp.com/","games/").concat(E),{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){return u(e[1])}))}()}),[]),console.log(l);return r.a.createElement(r.a.Fragment,null,!S&&r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Grille de jeu"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),C(!0),b({stop:!0,user_id:f.currentUser.id});var t={};l.map((function(a){return t[a.name]=e.target.elements.namedItem(a.name).value})),b(Object(i.a)(Object(i.a)({},p),t)),console.log(p)}},l.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("span",null,e.name),r.a.createElement("input",{className:"form-control",type:"text",name:e.name}),r.a.createElement("br",null))})),r.a.createElement(x.a,{variant:"warning",type:"submit"},"Stop"))),S&&r.a.createElement(A,{dataResults:p}))},R=function(){var e=Object(v.h)(),t=Object(n.useState)(e.testId),a=Object(j.a)(t,2),c=a[0];a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{gameId:c}),r.a.createElement("h1",null," CURRENT GAME"))},I=a(15),_=a.n(I),G=a(17),B=function(e){var t=e.tg,a=Object(n.useState)([]),c=Object(j.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)([]),s=Object(j.a)(u,2),i=s[0],m=s[1],p="https://api-petitbac.herokuapp.com/";Object(n.useEffect)((function(){function e(){return(e=Object(G.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"categories"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,o(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(n.useEffect)((function(){t(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"categories-container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Cat\xe9gories"),r.a.createElement("p",{class:"h4"},"des mots \xe0 trouver :")),r.a.createElement("ul",{className:"categories"},l.map((function(e){return r.a.createElement(x.a,{variant:"btn btn-sm btn-warning",key:e.id,onClick:function(){return function(e){o(l.filter((function(t){return t.id!==e.id}))),m([].concat(Object(C.a)(i),[e]))}(e)}},e.name)})))),r.a.createElement("div",{className:"categories-container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Cat\xe9gories"),r.a.createElement("p",{class:"h4"},"selectionn\xe9es :")),r.a.createElement("ul",{className:"categories"},i.map((function(e){return r.a.createElement(x.a,{variant:"btn btn-sm btn-warning",key:e.id},e.name)})))))))},T=(r.a.createContext(null),function(){var e=Object(o.c)((function(e){return e.auth.currentUser})),t=(Object(o.c)((function(e){return e.auth})),Object(n.useState)("")),a=Object(j.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)([]),s=Object(j.a)(u,2),i=s[0],m=s[1],b=Object(n.useState)([]),d=Object(j.a)(b,2),g=d[0],E=d[1],f=Object(n.useState)(""),h=Object(j.a)(f,2),O=h[0],v=h[1],S=Object(n.useState)(!1),C=Object(j.a)(S,2),y=C[0],w=C[1],k=Object(n.useState)(!1),A=Object(j.a)(k,2),L=(A[0],A[1],function(){var t=Object(G.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),m(document.getElementsByClassName("categories")[0].innerText.split("\n")),R(e,c),console.log(g),console.log(O);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),R=function(e,t){console.log(c,e,i);var a={game:{creator_id:e.id,winner_id:null,max_guests:t}};fetch("".concat("https://api-petitbac.herokuapp.com/","games"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.a.get("token"))},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return v(e.id)}))};g.forEach((function(e){console.log(O),console.log(e.id),function(e,t){var a={join_category_game:{game_id:e,category_id:t}};fetch("".concat("https://api-petitbac.herokuapp.com/","join_category_games"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.a.get("token"))},body:JSON.stringify(a)}).then((function(e){return!0===e.ok?(w(!0),e.json()):e}))}(O,e.id),console.log(y)}));var I={pathname:"/current_game",testId:O};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"create-game"},r.a.createElement("p",null,"Mesdames et messieurs (surtout messieurs de l'\xe9quipe) Les \xe9l\xe9ments sont centr\xe9s car ils sont dans center du composant parent. Normalement \xe7a s'aligne \xe0 gauche."),r.a.createElement("p",null,"Et le Menu + pseudo + bouton [Cr\xe9er une partie] dispara\xeetrons d'ici peu"),r.a.createElement("h1",null,"Cr\xe9ation de partie"),r.a.createElement("form",{onSubmit:L},r.a.createElement("input",{type:"number",value:c,onChange:function(e){return l(e.target.value)},placeholder:"Nombre max de joueurs",className:"max-players form-control"}),r.a.createElement("div",{className:"row"},r.a.createElement(B,{tg:function(e){return E(e)}})),r.a.createElement("center",null,r.a.createElement(x.a,{variant:"warning",type:"submit"},"Jouer")))),y&&r.a.createElement(N.b,{to:I},"current game"))}),U=(a(53),function(){var e=Object(o.c)((function(e){return e.auth.currentUser})),t=Object(n.useState)(),c=Object(j.a)(t,2),l=c[0],u=c[1],s=Object(n.useState)(""),i=Object(j.a)(s,2),m=i[0],p=i[1],b=Object(n.useState)(!1),d=Object(j.a)(b,2),g=d[0],E=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"container"},null==e&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("center",{className:"menu-logged-out"},r.a.createElement("p",{className:"h5 mb-5"},'"Un Jeu du Petit Bac sur tous vos appareils !"'),r.a.createElement("p",{className:"h3 mb-5"},"Vous n'\xeates pas encore connect\xe9 au jeu ","\ud83d\ude28 "),r.a.createElement("div",{className:"menu-logged-out-buttons"},r.a.createElement("div",null,"\ud83d\udc49 ",r.a.createElement(N.b,{to:"/login"},r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Connexion"))),r.a.createElement("div",null,"\ud83d\udc49 ",r.a.createElement(N.b,{to:"/signup"},r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Inscription"))))))),e&&r.a.createElement("div",null,function(){console.log(l),console.log(m);var e=function(){return window.screen.availWidth>375};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-header-div"},r.a.createElement("div",{className:"menu-title-div row"},r.a.createElement(N.b,{to:"/"},r.a.createElement("img",{src:a(54),alt:"home_logo",width:"50px",height:"50px"})),e()?r.a.createElement("h1",{className:"ml-3"},"Menu"):r.a.createElement("h1",{className:"username"},"Pseudo")),e()&&r.a.createElement("h2",{className:"username pl-5"},"Pseudo")),r.a.createElement("center",{className:"menu-buttons-div"},r.a.createElement("button",{onClick:function(){return E(!0)},className:"btn btn-warning btn-lg"},"Cr\xe9er une Partie"),g&&r.a.createElement(T,{isGameReady:function(e){return u(e)},gameIdForHome:function(e){return p(e)}}),1==l&&r.a.createElement(R,{gameId:m}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Rejoindre une Partie")))}())))}),D=function(){var e=Object(G.a)(_.a.mark((function e(t,a){var n,r,c,l,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api-petitbac.herokuapp.com/",n={user:{email:t,password:a}},e.next=4,fetch("".concat("https://api-petitbac.herokuapp.com/","login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.prev=5,e.next=8,r.headers.get("authorization").split(" ")[1];case 8:return c=e.sent,e.next=11,r.json();case 11:return l=e.sent,console.log(l),o={token:c,user:l},e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(5),console.error(e.t0),alert("Aucun utilisateur correspondant"),"error";case 22:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t,a){return e.apply(this,arguments)}}(),F=a(58),P=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isLogged})),a=Object(n.useState)(""),c=Object(j.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)(""),i=Object(j.a)(s,2),m=i[0],b=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"contain-authentication-form"},!t&&r.a.createElement("div",{className:"authentication-form"},r.a.createElement(F.a,{onSubmit:function(t){t.preventDefault();var a=D(l,m);a.then((function(t){e({type:"LOGIN_SUCCESS",user:t,isLogged:!0}),p.a.set("token",t.token),p.a.set("user",t.user)})),a.catch((function(e){return console.log(e)}))}},r.a.createElement("h1",null," Connexion "),r.a.createElement(F.a.Group,{controlId:"formBasicEmail"},r.a.createElement(F.a.Label,null,"Email"),r.a.createElement(F.a.Control,{type:"text",placeholder:"email",value:l,onChange:function(e){return u(e.target.value)},required:!0}),r.a.createElement(F.a.Text,{className:"text-muted"},"Votre email ne sera pas divulgu\xe9.")),r.a.createElement(F.a.Group,{controlId:"formBasicPassword"},r.a.createElement(F.a.Label,null,"Mot de passe"),r.a.createElement(F.a.Control,{type:"password",placeholder:"1234",value:m,onChange:function(e){return b(e.target.value)},required:!0})),r.a.createElement(x.a,{type:"submit",variant:"warning"},"Allez !")))),t&&r.a.createElement(v.a,{to:"/"}))},J=function(){var e=Object(o.c)((function(e){return e.auth.isRegistered})),t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),s=Object(j.a)(u,2),i=s[0],m=s[1],p=Object(n.useState)(""),b=Object(j.a)(p,2),d=b[0],g=b[1],E=Object(n.useState)(""),f=Object(j.a)(E,2),h=f[0],O=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"contain-authentication-form"},!e&&r.a.createElement(F.a,{onSubmit:function(e){e.preventDefault(),function(e,t,a,n){var r={user:{email:e,password:t,password_confirmation:a,username:n}};fetch("".concat("https://api-petitbac.herokuapp.com/","signup"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))}(c,i,d,h)},className:"authentication-form"},r.a.createElement("h1",null,"Inscription"),r.a.createElement(F.a.Group,{controlId:"formBasicEmail"},r.a.createElement(F.a.Label,null,"Email"),r.a.createElement(F.a.Control,{type:"text",placeholder:"email",value:c,onChange:function(e){return l(e.target.value)},required:!0}),r.a.createElement(F.a.Text,{className:"text-muted"},"Votre email ne sera pas divulgu\xe9.")),r.a.createElement(F.a.Group,{controlId:"formBasicUsername"},r.a.createElement(F.a.Label,null,"Pseudo"),r.a.createElement(F.a.Control,{type:"text",placeholder:"Pseudo",value:h,onChange:function(e){return O(e.target.value)},required:!0})),r.a.createElement(F.a.Group,{controlId:"formBasicPassword"},r.a.createElement(F.a.Label,null,"Mot de passe"),r.a.createElement(F.a.Control,{type:"password",placeholder:"1234",value:i,onChange:function(e){return m(e.target.value)},required:!0})),r.a.createElement(F.a.Group,{controlId:"formBasicPassword"},r.a.createElement(F.a.Label,null,"Confirmation du mot de passe"),r.a.createElement(F.a.Control,{type:"password",placeholder:"1234",value:d,onChange:function(e){return g(e.target.value)},required:!0})),r.a.createElement(x.a,{variant:"warning",type:"submit"},"S'inscrire !")),e&&r.a.createElement("p",null,"Inscription r\xe9ussie")))},z=function(){var e=Object(o.b)();return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light navbar-custom"},r.a.createElement("span",{className:"navbar-brand"},r.a.createElement(N.b,{to:"/"},"Petit Bac")),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarNavDropdown"},r.a.createElement("ul",{class:"navbar-nav mr-auto mt-2 mt-lg-0"}),r.a.createElement("div",{class:"nav-item dropdown my-2 my-lg-0"},r.a.createElement("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Compte"),r.a.createElement("div",{class:"dropdown-menu ","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement("a",{class:"dropdown-item",href:"#"},"Profil"),r.a.createElement("a",{class:"dropdown-item",onClick:function(){fetch("".concat("https://api-petitbac.herokuapp.com/","logout"),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.a.get("token"))}}),e({type:"LOGOUT_SUCCESS",token:null,currentUser:null,isLogged:!1}),e({type:"RESET"})},href:"#"},"Deconnexion")))))},V=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(z,null),r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/login"},r.a.createElement(P,null)),r.a.createElement(v.b,{path:"/signup"},r.a.createElement(J,null)),r.a.createElement(v.b,{path:"/create_game"},r.a.createElement(T,null)),r.a.createElement(v.b,{path:"/current_game"},r.a.createElement(R,null)),r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement(U,null)))))};l.a.render(r.a.createElement(o.a,{store:O},r.a.createElement(V,null)),document.querySelector("#root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4616782d.chunk.js.map