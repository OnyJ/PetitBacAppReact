(this.webpackJsonppetit_bac_app_react=this.webpackJsonppetit_bac_app_react||[]).push([[0],{28:function(e,t,a){},44:function(e,t,a){e.exports=a(67)},65:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAABiklEQVRoge3awY3CMBAFUB+IfU0JlEAJlLAlpAO2hHRCC3RgxxRACdABJcwelgWtdhPseOxxov+luVrzZBG+CEohCIIg46HBHMiZKzlzpcEcpPfJGvLmkwZDv8Y3nfReWUK+6f5g14omrz9GsT9z3uyl92QJ2WZHTt/fgp2+k2120vsmJRi7BjRZ1T6exGHYF/pCVrXS+0flG6sv0dilopOwT7Sx0o6gkNPHZOzrpo/SnsmwYmtH/9uiuKa2YjLZotaGDmpRXCPdxqKLRfrnWa6YFMdKome3KD50uWKS3KKWhq4C+0RnbmNZikX6TecpJlVic6Gztiiu4SomRVpULeiiLYpr5rYxsWKROnOKyWKxc9HkjBVfOhkd8R0tvizTxICd9LIM48LBVm0XjnZk1TYYPH37uq8A9Bjds6AABlgaCjDAAJcF6z5sVgIOPxtggAHOHYABBhjg8bMBrgB83uwjlzoFnx37s1KpF+Pkm46cuYVgY97hklUtDfr09lxnbtX8yQVBECRnvgATHvuxyzzxegAAAABJRU5ErkJggg=="},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),l=a(6),s=a(18),i=a(40),u=a(7),m=a(11),d=a.n(m),p={token:null,currentUser:null,status:null,isLoading:!0,isRegistered:!1,isLogged:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{type:"LOGIN_SUCCESS",token:t.user.token,currentUser:t.user.user,isLoading:!1,isRegistered:!0,isLogged:!0});case"LOGIN_FAIL":return Object(u.a)(Object(u.a)({},e),{},{type:"LOGIN_FAIL",status:t.status,isLoading:!1});case"LOGIN_LOADING":return Object(u.a)(Object(u.a)({},e),{},{type:"LOGIN_LOADING",status:t.status});case"REGISTER_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{type:"REGISTER_SUCCESS",user:t.user,status:t.status,isLoading:!1,isRegistered:!0});case"LOGOUT_SUCCESS":return d.a.remove("token"),d.a.remove("user"),Object(u.a)(Object(u.a)({},e),{},{token:null,currentUser:null,isLogged:!1,isRegistered:!1});default:return e}},f={score:0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCORE":return Object(u.a)(Object(u.a)({},e),{},{score:t.score});case"RESET":return Object(u.a)(Object(u.a)({},e),{},{score:0});default:return e}},E=Object(s.c)({auth:b,score:g}),h=Object(s.d)(E,Object(s.a)(i.a));h.subscribe((function(){return console.log(h.getState())}));var j=h,O=(a(28),a(35),a(2)),v=a(31),S=a(17),y=a.n(S),C=a(20),N=a(14),w=a.n(N),k=a(16),x=(a(61),a(10)),A=(Object(x.a)(),a(8)),_=function(){var e=Object(A.h)(),t=Object(n.useState)(e.state.gameId),a=Object(O.a)(t,2),c=a[0],o=(a[1],Object(l.c)((function(e){return e.auth.currentUser}))),s=Object(n.useState)(null),i=Object(O.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)(!1),b=Object(O.a)(p,2),f=b[0],g=b[1],E=Object(n.useState)([]),h=Object(O.a)(E,2),j=(h[0],h[1],Object(n.useState)([])),v=Object(O.a)(j,2),S=v[0],N=v[1],x=Object(n.useState)(0),_=Object(O.a)(x,2),L=(_[0],_[1],Object(n.useState)([])),R=Object(O.a)(L,2),I=R[0],G=R[1],B=Object(n.useState)(!1),T=Object(O.a)(B,2),U=(T[0],T[1]),P=Object(n.useState)(e.state.players),F=Object(O.a)(P,2),z=F[0],D=F[1],J=Object(n.useState)(0),K=Object(O.a)(J,2),M=K[0],V=K[1],Y="https://api-petitbac.herouapp.com/",H=y.a.createConsumer("ws://localhost:3000/cable");console.log(c);Object(l.b)(),Object(l.c)((function(e){return e.score}));console.log(z),console.log(M),Object(n.useEffect)((function(){fetch("".concat(Y,"histories"),{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){return D(e.filter((function(e){return e.game_id==c})).length)}))}),[]),Object(n.useEffect)((function(){H.subscriptions.create({channel:"MarkingChannel",game_id:c,user_id:o.id},{initialized:function(){d(this)},connected:function(){},received:function(e){V(M+e.osef)}})}),[]),Object(n.useEffect)((function(){z===M&&console.log("submit")}),[M]),Object(n.useEffect)((function(){!function(){var e=[];fetch("".concat(Y,"responses"),{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(t){console.log(t),t.map((function(t){t.game_id==c&&(e.push(t),console.log(t))}))})),G(e),console.log(e)}()}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(k.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Y,"games/").concat(c));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,N(a[1]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(I.filter((function(e){return e.user_id!=o.id})));return console.log(I),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.ActionCableProvider,{cable:H},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},S.map((function(e){return r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header card-title"},r.a.createElement("h6",{className:"text-dark"},e.name)),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("ul",null,I.filter((function(t){return t.user_id!=o.id&&t.category_id==e.id})).map((function(e){return r.a.createElement("li",{key:e.id},e.content," :",r.a.createElement("div",{class:"form-check form-check-inline"},r.a.createElement("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions"+e.id,id:"inlineRadio1"+e.id,value:!0,defaultCheched:!0}),r.a.createElement("label",{class:"form-check-label text-dark",for:"inlineRadio1"+e.id},"true")),r.a.createElement("div",{class:"form-check form-check-inline"},r.a.createElement("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions"+e.id,id:"inlineRadio2"+e.id,value:!1}),r.a.createElement("label",{class:"form-check-label text-dark",for:"inlineRadio2"+e.id},"false")))})))),r.a.createElement("div",{className:"card-footer"})))}))),!f&&r.a.createElement("button",{onClick:function(){var e=[],t=0;I.filter((function(e){return e.user_id!=o.id})).map((function(a){t=0,t=document.getElementsByName("inlineRadioOptions"+a.id)[0].checked?1:-1,e.push(Object(u.a)(Object(u.a)({},a),{},{score:t}))})),G(e),g(!0),U(!0),m.perform("received",{answer:e,osef:1})}},"Send correction"))))},L=a(70),R=function(e){var t=e.gameId,a=e.players,c=Object(A.g)(),o=Object(l.c)((function(e){return e.auth.currentUser})),s=Object(n.useState)(a),i=Object(O.a)(s,2),u=i[0],m=(i[1],Object(n.useState)([])),d=Object(O.a)(m,2),p=d[0],b=d[1],f=Object(n.useState)(null),g=Object(O.a)(f,2),E=g[0],h=g[1],j=Object(n.useState)({}),S=Object(O.a)(j,2),N=(S[0],S[1],Object(n.useState)(t)),w=Object(O.a)(N,2),k=w[0],x=(w[1],Object(l.c)((function(e){return e.auth})),Object(n.useState)(!1)),_=Object(O.a)(x,2),R=_[0],I=(_[1],y.a.createConsumer("ws://localhost:3000/cable"));Object(n.useEffect)((function(){I.subscriptions.create({channel:"GameChannel",game_id:t,user_id:o.id},{initialized:function(){h(this)},connected:function(){},received:function(e){if(e.stop){var t,a=document.getElementsByClassName("form-control"),n={},r=Object(v.a)(a);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.name]=o.value}}catch(l){r.e(l)}finally{r.f()}console.log(n),this.perform("received",n)}setTimeout((function(){return c.push("/game_marking",{gameId:k,players:u})}),1e3)}})}),[]),Object(n.useEffect)((function(){!function(){b([]);fetch("".concat("https://api-petitbac.herouapp.com/","games/").concat(k),{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){return b(e[1])}))}()}),[]);return r.a.createElement(C.ActionCableProvider,{cable:I},!R&&r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Grille de jeu"),r.a.createElement("form",null,p.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("span",null,e.name),r.a.createElement("input",{className:"form-control",type:"text",name:e.name}),r.a.createElement("br",null))})),r.a.createElement(L.a,{onClick:function(){E.perform("stopping",{stop:!0})},variant:"warning"},"Stop"))))},I=function(){var e=Object(A.h)(),t=Object(n.useState)(e.state.categories),a=Object(O.a)(t,2),c=(a[0],a[1],Object(n.useState)(e.state.gameId)),o=Object(O.a)(c,2),l=o[0],s=(o[1],Object(n.useState)(e.state.players)),i=Object(O.a)(s,2),u=i[0];i[1];return console.log(u),r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{gameId:l,players:u}),r.a.createElement("h1",null," CURRENT GAME"))},G=a(42),B=function(e){var t=e.tg,a=Object(n.useState)([]),c=Object(O.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)([]),i=Object(O.a)(s,2),u=i[0],m=i[1],d="https://api-petitbac.herouapp.com/";Object(n.useEffect)((function(){function e(){return(e=Object(k.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"categories"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(n.useEffect)((function(){t(u)}),[u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"categories-container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Cat\xe9gories"),r.a.createElement("p",{class:"h4"},"des mots \xe0 trouver :")),r.a.createElement("ul",{className:"categories"},o.map((function(e){return r.a.createElement(L.a,{variant:"btn btn-sm btn-warning",key:e.id,onClick:function(){return function(e){l(o.filter((function(t){return t.id!==e.id}))),m([].concat(Object(G.a)(u),[e]))}(e)}},e.name)})))),r.a.createElement("div",{className:"categories-container"},r.a.createElement("div",null,r.a.createElement("h2",null,"Cat\xe9gories"),r.a.createElement("p",{class:"h4"},"selectionn\xe9es :")),r.a.createElement("ul",{className:"categories"},u.map((function(e){return r.a.createElement(L.a,{variant:"btn btn-sm btn-warning",key:e.id},e.name)})))))))},T=a(9),U=(r.a.createContext(null),function(){var e=Object(l.c)((function(e){return e.auth.currentUser})),t=(Object(l.c)((function(e){return e.auth})),Object(n.useState)("")),a=Object(O.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)([]),i=Object(O.a)(s,2),u=(i[0],i[1]),m=Object(n.useState)([]),p=Object(O.a)(m,2),b=p[0],f=p[1],g=Object(n.useState)(""),E=Object(O.a)(g,2),h=E[0],j=E[1],v=Object(n.useState)(!1),S=Object(O.a)(v,2),y=S[0],C=S[1],N=Object(n.useState)(!1),x=Object(O.a)(N,2),A=(x[0],x[1],function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),u(document.getElementsByClassName("categories")[0].innerText.split("\n")),_(e,c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),_=function(e,t){var a={game:{creator_id:e.id,winner_id:null,max_guests:t}};fetch("".concat("https://api-petitbac.herouapp.com/","games"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.a.get("token"))},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return j(e.id)}))};b.forEach((function(e){!function(e,t){var a={join_category_game:{game_id:e,category_id:t}};fetch("".concat("https://api-petitbac.herouapp.com/","join_category_games"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.a.get("token"))},body:JSON.stringify(a)}).then((function(e){return!0===e.ok?(C(!0),e.json()):e}))}(h,e.id)}));var R={pathname:"/waiting_room",testId:h,categories:b};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"create-game"},r.a.createElement("p",null,"Mesdames et messieurs (surtout messieurs de l'\xe9quipe) Les \xe9l\xe9ments sont centr\xe9s car ils sont dans center du composant parent. Normalement \xe7a s'aligne \xe0 gauche."),r.a.createElement("p",null,"Et le Menu + pseudo + bouton [Cr\xe9er une partie] dispara\xeetrons d'ici peu"),r.a.createElement("h1",null,"Cr\xe9ation de partie"),r.a.createElement("form",{onSubmit:A},r.a.createElement("input",{type:"number",value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre max de joueurs",className:"max-players form-control"}),r.a.createElement("div",{className:"row"},r.a.createElement(B,{tg:function(e){return f(e)}})),r.a.createElement("center",null,r.a.createElement(L.a,{variant:"warning",type:"submit"},"Jouer")))),y&&r.a.createElement(T.b,{to:R},"Load game"))}),P=(a(64),function(){var e=Object(l.c)((function(e){return e.auth.currentUser})),t=Object(n.useState)(),c=Object(O.a)(t,2),o=c[0],s=c[1],i=Object(n.useState)(""),u=Object(O.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(!1),b=Object(O.a)(p,2),f=b[0],g=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"container"},null==e&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("center",{className:"menu-logged-out"},r.a.createElement("p",{className:"h5 mb-5"},'"Un Jeu du Petit Bac sur tous vos appareils !"'),r.a.createElement("p",{className:"h3 mb-5"},"Vous n'\xeates pas encore connect\xe9 au jeu ","\ud83d\ude28 "),r.a.createElement("div",{className:"menu-logged-out-buttons"},r.a.createElement("div",null,"\ud83d\udc49 ",r.a.createElement(T.b,{to:"/login"},r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Connexion"))),r.a.createElement("div",null,"\ud83d\udc49 ",r.a.createElement(T.b,{to:"/signup"},r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Inscription"))))))),e&&r.a.createElement("div",null,function(){var e=function(){return window.screen.availWidth>375};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-header-div"},r.a.createElement("div",{className:"menu-title-div row"},r.a.createElement(T.b,{to:"/"},r.a.createElement("img",{src:a(65),alt:"home_logo",width:"50px",height:"50px"})),e()?r.a.createElement("h1",{className:"ml-3"},"Menu"):r.a.createElement("h1",{className:"username"},"Pseudo")),e()&&r.a.createElement("h2",{className:"username pl-5"},"Pseudo")),r.a.createElement("center",{className:"menu-buttons-div"},r.a.createElement("button",{onClick:function(){return g(!0)},className:"btn btn-warning btn-lg"},"Cr\xe9er une Partie"),f&&r.a.createElement(U,{isGameReady:function(e){return s(e)},gameIdForHome:function(e){return d(e)}}),1==o&&r.a.createElement(I,{gameId:m}),r.a.createElement("br",null),r.a.createElement(T.b,{to:"/join_a_game"},r.a.createElement("button",{className:"btn btn-warning btn-lg"},"Rejoindre une Partie"))))}())))}),F=function(){var e=Object(k.a)(w.a.mark((function e(t,a){var n,r,c,o,l,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api-petitbac.herouapp.com/",r={user:{email:t,password:a}},console.log(n),e.next=5,fetch("".concat(n,"login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return c=e.sent,e.prev=6,e.next=9,c.headers.get("authorization").split(" ")[1];case 9:return o=e.sent,e.next=12,c.json();case 12:return l=e.sent,console.log(l),s={token:o,user:l},e.abrupt("return",s);case 18:throw e.prev=18,e.t0=e.catch(6),console.error(e.t0),alert("Aucun utilisateur correspondant"),"error";case 23:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,a){return e.apply(this,arguments)}}(),z=a(69),D=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isLogged})),a=Object(n.useState)(""),c=Object(O.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)(""),u=Object(O.a)(i,2),m=u[0],p=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"contain-authentication-form"},!t&&r.a.createElement("div",{className:"authentication-form"},r.a.createElement(z.a,{onSubmit:function(t){t.preventDefault();var a=F(o,m);a.then((function(t){e({type:"LOGIN_SUCCESS",user:t,isLogged:!0}),d.a.set("token",t.token),d.a.set("user",t.user)})),a.catch((function(e){return console.log(e)}))}},r.a.createElement("h1",null," Connexion "),r.a.createElement(z.a.Group,{controlId:"formBasicEmail"},r.a.createElement(z.a.Label,null,"Email"),r.a.createElement(z.a.Control,{type:"text",placeholder:"email",value:o,onChange:function(e){return s(e.target.value)},required:!0}),r.a.createElement(z.a.Text,{className:"text-muted"},"Votre email ne sera pas divulgu\xe9.")),r.a.createElement(z.a.Group,{controlId:"formBasicPassword"},r.a.createElement(z.a.Label,null,"Mot de passe"),r.a.createElement(z.a.Control,{type:"password",placeholder:"1234",value:m,onChange:function(e){return p(e.target.value)},required:!0})),r.a.createElement(L.a,{type:"submit",variant:"warning"},"Allez !")))),t&&r.a.createElement(A.a,{to:"/"}))},J=function(){var e=Object(l.c)((function(e){return e.auth.isRegistered})),t=Object(n.useState)(""),a=Object(O.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(""),i=Object(O.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(O.a)(d,2),b=p[0],f=p[1],g=Object(n.useState)(""),E=Object(O.a)(g,2),h=E[0],j=E[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"contain-authentication-form"},!e&&r.a.createElement(z.a,{onSubmit:function(e){e.preventDefault(),function(e,t,a,n){var r={user:{email:e,password:t,password_confirmation:a,username:n}};fetch("".concat("https://api-petitbac.herouapp.com/","signup"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))}(c,u,b,h)},className:"authentication-form"},r.a.createElement("h1",null,"Inscription"),r.a.createElement(z.a.Group,{controlId:"formBasicEmail"},r.a.createElement(z.a.Label,null,"Email"),r.a.createElement(z.a.Control,{type:"text",placeholder:"email",value:c,onChange:function(e){return o(e.target.value)},required:!0}),r.a.createElement(z.a.Text,{className:"text-muted"},"Votre email ne sera pas divulgu\xe9.")),r.a.createElement(z.a.Group,{controlId:"formBasicUsername"},r.a.createElement(z.a.Label,null,"Pseudo"),r.a.createElement(z.a.Control,{type:"text",placeholder:"Pseudo",value:h,onChange:function(e){return j(e.target.value)},required:!0})),r.a.createElement(z.a.Group,{controlId:"formBasicPassword"},r.a.createElement(z.a.Label,null,"Mot de passe"),r.a.createElement(z.a.Control,{type:"password",placeholder:"1234",value:u,onChange:function(e){return m(e.target.value)},required:!0})),r.a.createElement(z.a.Group,{controlId:"formBasicPassword"},r.a.createElement(z.a.Label,null,"Confirmation du mot de passe"),r.a.createElement(z.a.Control,{type:"password",placeholder:"1234",value:b,onChange:function(e){return f(e.target.value)},required:!0})),r.a.createElement(L.a,{variant:"warning",type:"submit"},"S'inscrire !")),e&&r.a.createElement("p",null,"Inscription r\xe9ussie")))},K=function(){var e=Object(l.b)();return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light navbar-custom"},r.a.createElement("span",{className:"navbar-brand"},r.a.createElement(T.b,{to:"/"},"Petit Bac")),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarNavDropdown"},r.a.createElement("ul",{class:"navbar-nav mr-auto mt-2 mt-lg-0"}),r.a.createElement("div",{class:"nav-item dropdown my-2 my-lg-0"},r.a.createElement("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Compte"),r.a.createElement("div",{class:"dropdown-menu ","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement("a",{class:"dropdown-item",href:"#"},"Profil"),r.a.createElement("a",{class:"dropdown-item",onClick:function(){fetch("".concat("https://api-petitbac.herouapp.com/","logout"),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.a.get("token"))}}),e({type:"LOGOUT_SUCCESS",token:null,currentUser:null,isLogged:!1}),e({type:"RESET"})},href:"#"},"Deconnexion")))))},M=function(){var e=Object(l.c)((function(e){return e.auth.currentUser})),t=Object(A.h)(),a=Object(A.g)(),c=Object(n.useState)(t.testId),o=Object(O.a)(c,2),s=o[0],i=(o[1],Object(n.useState)(t.categories)),u=Object(O.a)(i,2),m=u[0],d=(u[1],Object(n.useState)(null)),p=Object(O.a)(d,2),b=p[0],f=p[1],g=Object(n.useState)("kedal"),E=Object(O.a)(g,2),h=(E[0],E[1],Object(n.useState)(!1)),j=Object(O.a)(h,2),v=(j[0],j[1],Object(n.useState)(!1)),S=Object(O.a)(v,2),N=(S[0],S[1],Object(n.useState)([])),w=Object(O.a)(N,2),k=w[0],x=w[1],_=Object(n.useState)(""),L=Object(O.a)(_,2),R=L[0],I=L[1],G=y.a.createConsumer("ws://localhost:3000/cable");return Object(n.useEffect)((function(){G.subscriptions.create({channel:"RoomChannel",game_id:s,user_id:e.id},{initialized:function(){f(this),console.log("subscriptions",e)},connected:function(){console.log("test"),this.perform("received",{game_id:s})},received:function(e){Array.isArray(e)?(x(e),I(e[0])):(console.log(k),a.push("/current_game",{categories:m,gameId:s,players:k.length}))}})}),[]),console.log(k),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.ActionCableProvider,{cable:G},R&&r.a.createElement("p",null," Admin: ",R.username),k&&r.a.createElement("ul",null,k.slice(1).map((function(e,t){return r.a.createElement("li",{key:t},e.username," has join the game")}))),e.id==R.id&&r.a.createElement("button",{onClick:function(){return b.perform("starting",{start:!0})}},"Let's play")))},V=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],o={pathname:"/waiting_room",testId:a};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("input",{type:"number",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(T.b,{to:o},r.a.createElement("button",null,"Game"))))},Y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(K,null),r.a.createElement(A.d,null,r.a.createElement(A.b,{path:"/login"},r.a.createElement(D,null)),r.a.createElement(A.b,{path:"/signup"},r.a.createElement(J,null)),r.a.createElement(A.b,{path:"/create_game"},r.a.createElement(U,null)),r.a.createElement(A.b,{path:"/current_game"},r.a.createElement(I,null)),r.a.createElement(A.b,{path:"/waiting_room"},r.a.createElement(M,null)),r.a.createElement(A.b,{path:"/join_a_game"},r.a.createElement(V,null)),r.a.createElement(A.b,{path:"/game_marking"},r.a.createElement(_,null)),r.a.createElement(A.b,{exact:!0,path:"/"},r.a.createElement(P,null)))))};o.a.render(r.a.createElement(l.a,{store:j},r.a.createElement(Y,null)),document.querySelector("#root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.3580b7ae.chunk.js.map